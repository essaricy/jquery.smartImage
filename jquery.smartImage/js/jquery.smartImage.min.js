!function(r){r.fn.smartImage=function(e){function o(e){a<=parseInt(m)-1?(console.log("Loading image for: "+i+" ("+a+")"),img=new Image,img.onerror=function(){setTimeout(function(){o(e)},t["retry-delay"])},img.onload=function(){console.log("Loaded image for: "+i+" ("+(a-1)+")"),r(e).attr("src",img.src)},img.src=l):(console.log("Loading image failed for: "+i+" ("+a+'). Setting src to "error-image"'),r(e).attr("src",n)),a++}var t=r.extend({"load-image":null,"retry-max":0,"retry-delay":0,"place-holder":null,"error-image":null},e),a=1,i=r(this).attr("id"),l=t["load-image"],n=t["error-image"],m=t["retry-max"],g=t["place-holder"];if(null==i)throw'jquery.smartImage - "id" is not set for <img>';if(null==l)throw'jquery.smartImage - "load-image" is not set for: '+i;if(null==n)throw'jquery.smartImage - "error-image" is not set for: '+i;if(0!=m&&null==g)throw'jquery.smartImage - "retry-max" has value but ""place-holder" is not specified';o(r(this)),null!=g&&this.attr("src",g)}}(jQuery);